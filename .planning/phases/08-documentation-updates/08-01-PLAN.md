---
phase: 08-documentation-updates
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - README.md
autonomous: true

must_haves:
  truths:
    - "User understands the simplified wizard flow (no AWS Organizations prompts)"
    - "User knows how to set up AWS environments after project generation"
    - "User knows how to configure GitHub for each environment"
    - "User can troubleshoot common setup errors"
  artifacts:
    - path: "README.md"
      provides: "Complete CLI documentation with post-install workflow"
      contains: "Post-Install Setup"
  key_links:
    - from: "Wizard Prompts section"
      to: "Post-Install Setup section"
      via: "Workflow progression"
      pattern: "setup-aws-envs.*initialize-github"
---

<objective>
Update README.md to document the new CLI architecture: simplified wizard (7 prompts, no AWS Organizations), new post-install commands (setup-aws-envs, initialize-github), and complete workflow from project creation to deployment.

Purpose: Users need clear documentation to understand the new two-phase approach: wizard creates project, then post-install commands configure AWS and GitHub.

Output: Updated README.md with accurate wizard prompts, new Post-Install Setup section, command documentation, and troubleshooting guidance.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-documentation-updates/08-CONTEXT.md
@README.md
@src/cli.ts
@src/wizard.ts
@src/commands/setup-aws-envs.ts
@src/commands/initialize-github.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update wizard prompts and remove deprecated content</name>
  <files>README.md</files>
  <action>
Update the "Wizard Prompts" section to reflect the simplified 7-prompt flow:
1. Project name - npm-compatible
2. Platforms - web, mobile, api selection
3. Authentication - provider selection (none, Cognito, Auth0)
4. Auth features - social login, MFA (conditional)
5. Features - GitHub Actions, VS Code config
6. AWS region - deployment region
7. Brand color - theme selection

Remove item 4 "AWS Organizations" from the current wizard prompts list - this is now handled by setup-aws-envs command.

Remove the "Setup GitHub Command" section entirely (the deprecated command). Do not mention setup-github anywhere - clean break per CONTEXT.md.

Update "CLI Options" section to show current command structure from cli.ts printHelp():
- (default) - Create new project
- setup-aws-envs - Set up AWS Organizations and accounts
- initialize-github - Configure GitHub Environment
- --help, --version flags
  </action>
  <verify>README.md contains 7 wizard prompts without AWS Organizations, no mention of setup-github command</verify>
  <done>Wizard prompts section accurate, deprecated command removed, CLI options updated</done>
</task>

<task type="auto">
  <name>Task 2: Add Post-Install Setup section with workflow</name>
  <files>README.md</files>
  <action>
Add a new "Post-Install Setup" section after "After Generation" section. This is the core documentation for the new architecture.

Structure (friendly, conversational tone per CONTEXT.md):

## Post-Install Setup

After creating your project, you'll set up AWS environments and GitHub deployment. This is a one-time setup.

### Prerequisites

Before you begin:
- AWS CLI configured with credentials from your AWS management account
- GitHub repository created for your project
- GitHub Personal Access Token with "repo" scope ([create one here](https://github.com/settings/tokens/new))

### Step 1: Set Up AWS Environments

From your project directory, run:

```bash
npx create-aws-project setup-aws-envs
```

This command:
- Creates an AWS Organization (if you don't have one)
- Creates three environment accounts: dev, stage, prod
- Prompts for a unique root email for each account (tip: use aliases like you+dev@email.com)

**What's happening:** AWS Organizations lets you isolate each environment in its own AWS account. This is a security best practice - your production data is completely separate from development.

Expected output:
```
✔ Created AWS Organization: o-xxxxxxxxxx
✔ Created dev account: 123456789012
✔ Created stage account: 234567890123
✔ Created prod account: 345678901234

AWS environment setup complete!
```

Account IDs are saved to `.aws-starter-config.json` for the next step.

### Step 2: Configure GitHub Environments

For each environment, run:

```bash
npx create-aws-project initialize-github dev
```

This command:
- Creates an IAM deployment user in the target AWS account
- Configures GitHub Environment secrets with AWS credentials
- Sets up least-privilege permissions for CDK deployments

**What's happening:** Each GitHub Environment (Development, Staging, Production) gets its own AWS credentials. When GitHub Actions runs, it uses the right credentials for the target environment.

Repeat for each environment:
```bash
npx create-aws-project initialize-github stage
npx create-aws-project initialize-github prod
```

You'll be prompted for your GitHub PAT each time (it's not stored).

### You're Done!

Push to main to trigger your first deployment:
```bash
git push origin main
```

GitHub Actions will deploy to your dev environment automatically.
  </action>
  <verify>README.md contains "Post-Install Setup" section with Steps 1 and 2, includes expected terminal output</verify>
  <done>Complete post-install workflow documented with prerequisites, commands, and expected output</done>
</task>

<task type="auto">
  <name>Task 3: Add troubleshooting section</name>
  <files>README.md</files>
  <action>
Add a "Troubleshooting" section after "Post-Install Setup". Base content on actual error scenarios from the command implementations (setup-aws-envs.ts handleAwsError and initialize-github.ts handleError).

## Troubleshooting

### setup-aws-envs errors

**"Insufficient AWS permissions"**
Your AWS credentials need Organizations permissions. Ensure you're using credentials from the management account (not a member account).

Required permissions:
- organizations:DescribeOrganization
- organizations:CreateOrganization
- organizations:CreateAccount
- organizations:DescribeCreateAccountStatus

**"AWS Organizations limit reached"**
AWS limits how many accounts you can create. Contact AWS Support to request a limit increase.

**"AWS Organization is still initializing"**
New organizations take up to an hour to fully initialize. Wait and try again.

### initialize-github errors

**"Cannot assume role in target account"**
The command needs to access the target AWS account via `OrganizationAccountAccessRole`. This role is created automatically when you create accounts via `setup-aws-envs`. Ensure:
1. You ran `setup-aws-envs` first
2. Your credentials are from the management account
3. The account ID in `.aws-starter-config.json` is correct

**"IAM user already exists"**
The deployment user already exists in the target account. To retry:
1. Go to AWS Console > IAM > Users
2. Delete the existing `<project>-<env>-deploy` user
3. Run the command again

**"GitHub authentication failed"**
Your Personal Access Token may be invalid or missing permissions. Ensure:
1. Token has "repo" scope enabled
2. Token belongs to the repository owner (or has collaborator access)
3. Token is not expired

Create a new token at: https://github.com/settings/tokens/new
  </action>
  <verify>README.md contains Troubleshooting section with AWS and GitHub error guidance</verify>
  <done>Troubleshooting section covers common errors from both commands with actionable solutions</done>
</task>

</tasks>

<verification>
After all tasks:
1. README.md reflects simplified wizard (7 prompts, no AWS Organizations)
2. No mention of deprecated setup-github command
3. Post-Install Setup section exists with complete workflow
4. Troubleshooting section exists with common errors
5. Tone is friendly and conversational
6. Links to AWS/GitHub docs where appropriate
</verification>

<success_criteria>
- DOC-01: README.md updated with new CLI commands and usage
- DOC-02: Wizard prompts section reflects simplified flow (no AWS Organizations)
- DOC-03: Post-install setup workflow documented (setup-aws-envs -> initialize-github)
</success_criteria>

<output>
After completion, create `.planning/phases/08-documentation-updates/08-01-SUMMARY.md`
</output>
