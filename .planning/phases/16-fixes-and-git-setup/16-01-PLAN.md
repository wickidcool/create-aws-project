---
phase: 16-fixes-and-git-setup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/cli.ts
  - src/wizard.ts
  - templates/root/README.md
autonomous: true

must_haves:
  truths:
    - "Running `npx create-aws-project my-app` pre-fills 'my-app' as the default project name in the wizard prompt"
    - "Help text, banner, and usage examples show 'create-aws-project' (not 'create-aws-starter-kit')"
    - "Generated project README links to the correct npm package URL"
  artifacts:
    - path: "src/wizard.ts"
      provides: "WizardOptions interface and defaultName passthrough"
      contains: "defaultName"
    - path: "src/cli.ts"
      provides: "Name arg extraction and corrected help/banner text"
      contains: "create-aws-project"
    - path: "templates/root/README.md"
      provides: "Correct npm package link"
      contains: "npmjs.com/package/create-aws-project"
  key_links:
    - from: "src/cli.ts"
      to: "src/wizard.ts"
      via: "runWizard({ defaultName: nameArg })"
      pattern: "runWizard.*defaultName"
    - from: "src/wizard.ts"
      to: "src/prompts/project-name.ts"
      via: "spread projectNamePrompt with override initial"
      pattern: "\\.\\.\\.(projectNamePrompt|namePrompt).*initial"
---

<objective>
Fix CLI argument handling and documentation references.

Purpose: Two bugs prevent correct user experience -- (1) project name passed via CLI arg is ignored by the wizard, and (2) stale package name references appear in help text, banner, and generated README.
Output: Corrected `src/cli.ts`, `src/wizard.ts`, and `templates/root/README.md`.
</objective>

<execution_context>
@/Users/alwick/.claude/get-shit-done/workflows/execute-plan.md
@/Users/alwick/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/16-fixes-and-git-setup/16-RESEARCH.md

@src/cli.ts
@src/wizard.ts
@src/prompts/project-name.ts
@templates/root/README.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Pass CLI name argument through to wizard prompt</name>
  <files>src/wizard.ts, src/cli.ts</files>
  <action>
In `src/wizard.ts`:
1. Add a `WizardOptions` interface with an optional `defaultName?: string` field.
2. Change the `runWizard()` signature to accept `options: WizardOptions = {}`.
3. Inside `runWizard`, before the `prompts()` call, create a local `namePrompt` variable:
   - If `options.defaultName` is truthy, spread `projectNamePrompt` and override `initial`: `{ ...projectNamePrompt, initial: options.defaultName }`
   - Otherwise, use `projectNamePrompt` as-is.
4. Replace `projectNamePrompt` in the prompts array with the local `namePrompt` variable.
5. Do NOT mutate the imported `projectNamePrompt` object (avoid module-level side effects).

In `src/cli.ts`:
1. In the `runCreate` function, change the parameter from `_args: string[]` to `args: string[]`.
2. Before calling `runWizard()`, extract the project name: `const nameArg = args.find(arg => !arg.startsWith('-'));`
3. Pass it to the wizard: `const config = await runWizard(nameArg ? { defaultName: nameArg } : undefined);`
  </action>
  <verify>
Run `npm run build` to confirm TypeScript compilation succeeds with no errors. Then verify by grepping:
- `grep -n "defaultName" src/wizard.ts` shows the WizardOptions interface and usage
- `grep -n "nameArg" src/cli.ts` shows extraction and passthrough
- `grep -n "_args" src/cli.ts` returns no results (underscore prefix removed)
  </verify>
  <done>
`runWizard` accepts an optional `defaultName` parameter. `runCreate` extracts the first non-flag CLI argument and passes it as `defaultName`. The `projectNamePrompt` module export is never mutated.
  </done>
</task>

<task type="auto">
  <name>Task 2: Fix stale package name references in help text, banner, and template README</name>
  <files>src/cli.ts, templates/root/README.md</files>
  <action>
In `src/cli.ts`, replace ALL occurrences of `create-aws-starter-kit` with `create-aws-project` in the following functions:
- `printHelp()` (lines 63, 78, 79, 80, 83, 84, 85, 86) -- 8 occurrences in the help text string
- `printWelcome()` (line 97) -- 1 occurrence in the banner

That is 9 total replacements in `src/cli.ts`. Do a simple find-and-replace of the string `create-aws-starter-kit` with `create-aws-project` within these two functions ONLY.

IMPORTANT: Do NOT touch `src/aws/iam.ts`. The `create-aws-starter-kit` references there are IAM tag values (`ManagedBy` tag) used for idempotent adoption of existing IAM users created by v1.5.0. Changing them would break backward compatibility.

In `templates/root/README.md`, line 112:
- Change `https://www.npmjs.com/package/create-aws-starter-kit` to `https://www.npmjs.com/package/create-aws-project`
  </action>
  <verify>
Run `npm run build` to confirm compilation succeeds.
Then verify no stale references remain in user-facing code:
- `grep -rn "create-aws-starter-kit" src/cli.ts` returns no results
- `grep -rn "create-aws-starter-kit" templates/root/README.md` returns no results
- `grep -rn "create-aws-starter-kit" src/aws/iam.ts` SHOULD still return results (IAM tags unchanged)
  </verify>
  <done>
All 9 occurrences in `src/cli.ts` and 1 occurrence in `templates/root/README.md` replaced with `create-aws-project`. IAM tag values in `src/aws/iam.ts` remain unchanged.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` passes with zero errors
2. `npm test` passes (existing tests still green)
3. `grep -rn "create-aws-starter-kit" src/cli.ts templates/root/README.md` returns zero results
4. `grep -n "defaultName" src/wizard.ts` shows WizardOptions interface and usage in runWizard
5. `grep -rn "create-aws-starter-kit" src/aws/iam.ts` still returns results (IAM tags preserved)
</verification>

<success_criteria>
- FIX-01: `runWizard` accepts `defaultName` option; `runCreate` extracts CLI arg and passes it through
- FIX-02: All user-facing `create-aws-starter-kit` references replaced with `create-aws-project`; IAM tags untouched
- Build succeeds, tests pass
</success_criteria>

<output>
After completion, create `.planning/phases/16-fixes-and-git-setup/16-01-SUMMARY.md`
</output>
