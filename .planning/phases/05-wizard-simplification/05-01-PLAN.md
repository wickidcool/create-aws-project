---
phase: 05-wizard-simplification
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/wizard.ts
  - src/__tests__/wizard.spec.ts
autonomous: true

must_haves:
  truths:
    - "Wizard prompts only for project name, platforms, auth, features, region, theme"
    - "User never sees AWS Organizations prompts during wizard flow"
    - "Wizard returns ProjectConfig without org field"
  artifacts:
    - path: "src/wizard.ts"
      provides: "Simplified wizard with 7 prompts"
      contains: "themePrompt"
      not_contains: "enableOrgPrompt"
    - path: "src/__tests__/wizard.spec.ts"
      provides: "Updated test expectations"
      contains: ".toBe(7)"
  key_links:
    - from: "src/wizard.ts"
      to: "src/prompts/*.js"
      via: "imports"
      pattern: "import.*from.*prompts"
---

<objective>
Simplify wizard.ts by removing AWS Organizations prompts and processing logic

Purpose: The main wizard should only handle project scaffolding. AWS Organizations setup moves to the setup-aws-envs command (Phase 6).

Output: wizard.ts with 7 prompts (down from 15), updated test verifying 7 prompts
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-wizard-simplification/05-CONTEXT.md
@.planning/phases/05-wizard-simplification/05-RESEARCH.md
@src/wizard.ts
@src/__tests__/wizard.spec.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove org prompts and processing from wizard.ts</name>
  <files>src/wizard.ts</files>
  <action>
Remove all AWS Organizations functionality from wizard.ts:

1. Remove imports from org-structure.js:
   - enableOrgPrompt
   - orgNamePrompt
   - orgEnvironmentsPrompt
   - devEmailPrompt
   - stageEmailPrompt
   - prodEmailPrompt
   - qaEmailPrompt
   - sandboxEmailPrompt

2. Remove type imports no longer needed:
   - OrgAccountConfig
   - OrgConfig

3. Remove 8 org prompts from the prompts array, leaving only:
   - projectNamePrompt
   - platformsPrompt
   - authProviderPrompt
   - authFeaturesPrompt
   - featuresPrompt
   - awsRegionPrompt
   - themePrompt

4. Remove the entire org config processing block (lines 64-88):
   - The `let org: OrgConfig | undefined;` declaration
   - The `if (response.enableOrg)` block with accounts mapping
   - The `if (org) { config.org = org; }` assignment

5. Keep all other logic unchanged:
   - onCancel handler
   - Required field validation
   - Features default to empty array
   - Auth config construction
   - ProjectConfig construction (without org field)

Final wizard should have ~50 lines (down from ~104).
  </action>
  <verify>
Run TypeScript compilation: `npm run build`
No errors about missing org properties or unused imports
  </verify>
  <done>
wizard.ts contains exactly 7 prompts, no org-structure.js imports, no org processing logic
  </done>
</task>

<task type="auto">
  <name>Task 2: Update wizard test expectations</name>
  <files>src/__tests__/wizard.spec.ts</files>
  <action>
Update the test that verifies prompt count:

1. Find the test "should pass correct prompts to prompts library" (around line 197)

2. Update the comment and assertion:
   - OLD comment: "Verify 15 prompts are passed..."
   - NEW comment: "Verify 7 prompts are passed (projectName, platforms, authProvider, authFeatures, features, awsRegion, brandColor)"
   - OLD assertion: `expect((promptsArg as PromptObject[]).length).toBe(15);`
   - NEW assertion: `expect((promptsArg as PromptObject[]).length).toBe(7);`

3. Verify no other tests reference org-related fields (they should not, based on current test file)
  </action>
  <verify>
Run tests: `npm test`
All wizard tests pass, including the updated prompt count test
  </verify>
  <done>
Test expects 7 prompts, all wizard tests pass
  </done>
</task>

</tasks>

<verification>
1. Build succeeds: `npm run build`
2. Tests pass: `npm test`
3. Manual inspection: wizard.ts has no org-structure imports
4. Grep verification: `grep -c "enableOrgPrompt" src/wizard.ts` returns 0
</verification>

<success_criteria>
- wizard.ts has exactly 7 prompts in the prompts array
- wizard.ts has no imports from './prompts/org-structure.js'
- wizard.ts has no OrgConfig or OrgAccountConfig type references
- wizard.spec.ts expects 7 prompts and all tests pass
- npm run build succeeds with no errors
- npm test passes all wizard tests
</success_criteria>

<output>
After completion, create `.planning/phases/05-wizard-simplification/05-01-SUMMARY.md`
</output>
